<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Conex Research Project Board</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- 
  Todos:
  - we need to change the range of the airpressure (they don't match in fall and spring)
  - we need to get a scale for the values for airpressure

  -->

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- Visualisations -->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>




  <!--<script type="module">
  //import * as d3 from "https://cdn.skypack.dev/d3@7";
  //const div = d3.selectAll("div");
  </script>-->

  <!-- =======================================================
  * Template Name: iPortfolio - v3.9.0
  * Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="assets/img/conex-seal.webp" alt="" class="img-fluid rounded-circle">
        <h1 class="text-light"><a href="index.html">Conex Research</a></h1>
        <div class="social-links mt-3 text-center">
          <a href="https://twitter.com/ConexResearch" class="twitter"><i class="bx bxl-twitter"></i></a>
          <!--<a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>-->
          <a href="https://www.linkedin.com/company/conexresearch" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul>
          <li><a href="#hero" class="nav-link scrollto active">
            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="#aaaaaa" d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>
            <span>&nbsp;&nbsp;&nbsp;Home</span></a></li>
          <li><a href="#p9simulation" class="nav-link scrollto">
            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 512 512"><path fill="#6284FF" d="M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"/></svg>
            <span>&nbsp;&nbsp;&nbsp;Planet 9 Simulation</span></a></li>
          
          <!--<li><a href="#contact" class="nav-link scrollto"><i class="bx bx-envelope"></i> <span>Contact</span></a></li>-->
        </ul>
      </nav><!-- .nav-menu -->
    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex flex-column justify-content-center align-items-center">
    <div class="hero-container" data-aos="fade-in">
      <h1>Project Board</h1>
      <h1>by Conex Research</h1>
      <p>Get involved with <span class="typed" data-typed-items="fluid dynamics, spacecraft structure, data science"></span></p>
    </div>
  </section><!-- End Hero -->




  <main id="main">

    <section id="">
      <div class="container" class="about">
        <div class="section-title">
          <h2>How it works</h2>
          
          <ul>
            <li> We keep updating our project board with sub-projects of our space missions Arcanum and Astreaeus. </li>
            <li> You choose a topic of interest and work on it as part of a university project, or as your Bachelor's, Master's or PhD dissertation.</li>
            <li> This can be:</li>
              <ol> 
                <li> fully external in your university. In this case, we are happy to give further information, as well as are happy to cite your work once it is published, or assist you for publishing it.</li>
                <li> within the Conex team. In this case you become part of the team, you can attend our Friday meetings and we will publish your work in case of successful completion with you as main author together.</li>
              </ol>
            <li> Feel free to contact us on <a href="mailto:hello@conexresearch.com">hello@conexresearch.com</a> if you are interested or you have any questions!</li>
          </ul>

        </div>
      </div>
    </section>


    <!-- ======= About Section ======= -->
    <section id="p9simulation" class="earth-light">
      <div class="container">

        <div class="section-title">
          <h2>Planet 9: Simulation of possible composition and brightness in the night sky.</h2>
          <p>In the past decade nearly two-thirds of the known trans-Neptunian objects, including objects beyond 1000 AU, were discovered. Orbits of the most distant objects are highly eccentric, which is suggested to be due to the presence of a ninth planet. A hypothentical planet is estimated to be several times more massive than Earth, while smaller than Neptune.
          </p>
        </div>

        <div class="row">

          <div class="col-lg-6 col-md-12" data-aos="fade-right">
            <div class="content">
              <h3>
              <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="#173b6c" d="M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2v82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9V380.8c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168c22.1 0 40-17.9 40-40s-17.9-40-40-40s-40 17.9-40 40s17.9 40 40 40z"/></svg> &nbsp; Mission </h3>
              <p>This topic is part of the Arcanum Mission.</p>
            </div>
          </div>

          <div class="col-lg-5 col-md-12" data-aos="fade-left" data-aos-delay="100">
            <div class="content">
              <h3>
              <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="#173b6c" d="M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"/></svg> &nbsp; State </h3>
              <p> Open for university project/dissertation. Basic literature review was performed. </p>
            </div>
          </div>



          <div class="col-lg-6" data-aos="fade-right">
            <!--<img src="assets/img/conex_seal.gif" class="img-fluid" alt="">-->
            <div class="content">
              <h3>
              <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="#173b6c" d="M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"/></svg> &nbsp; Previous work</h3>
              <p>
                Previous work focuses on determining characteristics that a missing planet in the solar system might have:
                <ul>
                  <li> Period: 10,000 â€“ 20,000 years. <span>Source: NASA Sandbox</span></li>
                  <li> Semi-major Axis: 380^{+140}_{-80} (AU) {BrownMichaelE2021TOoP} </li>
                  <li> Perihelion: 300^{+85}_{-60} (AU) {BrownMichaelE2021TOoP} </li>
                  <li> Eccentricity: 0.2-0.5 {BatyginKonstantin2019Tpnh} </li>
                  <li> Inclination: 16\pm5\degree {BrownMichaelE2021TOoP} </li>
                  <li> Argument of Pericenter: 150\degree {Batygin2016} </li>
                  <li> Mean Anomaly: 0.5 {sandboxnasa} </li>
                  <li> Mass: 6.2^{+2.2}_{-1.3} M_Earth {BrownMichaelE2021TOoP} </li>
                </ul>
              </p>
                    
            </div>
          </div>

          <div class="col-lg-5 pt-4 pt-lg-0 content" data-aos="fade-left">
            <h3>
              <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="#173b6c" d="M184.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L39 113c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L39 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM256 96c0-17.7 14.3-32 32-32H512c17.7 0 32 14.3 32 32s-14.3 32-32 32H288c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32H512c17.7 0 32 14.3 32 32s-14.3 32-32 32H288c-17.7 0-32-14.3-32-32zM192 416c0-17.7 14.3-32 32-32H512c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32zM80 464c-26.5 0-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48s-21.5 48-48 48z"/></svg> &nbsp; Tasks</h3>
            <p class="fst-italic">

            <ol>
              <li>Model the properties of a variety of planets at given distances from the Sun, as observed from Neptune, with approximated masses, sizes and compositions using knowledge of exoplanets (e.g. HD 106906 b), and general information about the formation mechanics of planets.</li>
              <li>Determine the intensity of flux at different wavelengths observed at Neptune from Kuiper Belt Objects (KBOs).</li>
              <li>Understand extragalactic background light (EBL), diffuse Galactic light (DGL), and Zodiacal light as sources of interference in observations made from within the Solar System, and how these impact observations of the Kuiper Belt. In the context of this, review mission concepts such as ZEBRA and EXZIT telescopes. </li>
              <li> Determine the brightness of the Kuiper Belt from Earth's orbit, Jupiter's orbit and Neptune's orbit. Paper: Information in the Reflected-light Spectra of Widely Separated Giant Exoplanets (Hu, 2019).</li>
            </ol>
            </p>
          </div>


        </div>

      </div>
    </section><!-- End About Section -->


  
  </main><!-- End #main -->

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex flex-column justify-content-center align-items-center">
    <div class="hero-container" data-aos="fade-in">
      <h1>Our Planet, Our Future.</h1>
      <!-- <p>Learn more about <span class="typed" data-typed-items="Earth, the Moon, Titan, Venus, Mars"></span></p> -->
    </div>
  </section><!-- End Hero -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>Conex Research</span></strong>
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/ -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer><!-- End  Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Visualisation stuff -->
      
    <script>

// Size ?
var box = document.querySelector('.content');
var width = box.offsetWidth;
var height = box.offsetWidth - box.offsetWidth/4;

// The svg
var svg = d3.select("#my_dataviz")
  .append("svg")
  .attr("width", width)
  .attr("height", height)

// Map and projection
var projection = d3.geoMercator()
    .center([-90.5, 29.5])                // GPS of location to zoom on
    .scale(9000)                       // This is like the zoom
    .translate([ width/2, height/2 ])

// Create data for circles:
var markers = [
  {long: -91.445, lat: 29.510, name: "Atchafalaya River and Terrebonne Basins, Louisiana "},
  {long: -90.822, lat: 29.171, name: "Atchafalaya River and Terrebonne Basins, Louisiana 1"}
];

var cities = [
  {lat: 30.222708, long: -92.021188, name: "Lafayette"},
  {lat: 30.446537, long: -91.179788, name: "Baton Rouge"},
  {lat: 29.935802, long: -90.092378, name: "New Orleans"},
  {lat: 29.487184, long: -89.703631, name: "Port Sulphur"},
  {lat: 29.639886, long: -91.224589, name: "St Mary Parish"}
  //{lat: 30.219550, long: -93.212037, name: "Lake Charles"},
  //{lat: 30.207972, long: -92.681870, name: "Jennings"},
];

var Bathy = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/ADCP_20210325-154526_WLO_VP-MW-center_001_Rep1_Bathy.csv", function(d) {
  
  for (var i = 0; i < d.length; i++) {
        Bathy.push({"long": d[i].longitude, "lat": d[i].latitude, "river_depth": d[i].river_depth, "colour": "#9999FF"});
    }
})


var allGroup = ["Spring 2021", "Fall 2021"]
var dropdownButton = d3.select("#dataviz_builtWithD3")
  .append('select')

var turbidity_s2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Spring2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.turbidity); });
  var max = d3.max(d, function(a) { return + a.turbidity; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        turbidity_s2021.push({"long": d[i].longitude, "lat": d[i].latitude, "turbidity": d[i].turbidity, "colour": myColor});
    }
})

var turbidity_f2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Fall2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.turbidity); });
  var max = d3.max(d, function(a) { return + a.turbidity; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        turbidity_f2021.push({"long": d[i].longitude, "lat": d[i].latitude, "turbidity": d[i].turbidity, "colour": myColor});
    }
})

var salinity_s2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Spring2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  function removehigh(e,c){
    if(e<10){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.salinity); });
  var max = d3.max(d, function(a) { return + a.salinity; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        salinity_s2021.push({"long": d[i].longitude, "lat": d[i].latitude, "salinity": d[i].salinity, "colour": myColor});
    }
})

var salinity_f2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Fall2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  function removehigh(e,c){
    if(e<10){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.salinity); });
  var max = d3.max(d, function(a) { return + a.salinity; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        salinity_f2021.push({"long": d[i].longitude, "lat": d[i].latitude, "salinity": d[i].salinity, "colour": myColor});
    }
})

var temperature_s2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Spring2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.temperature); });
  var max = d3.max(d, function(a) { return + a.temperature; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        temperature_s2021.push({"long": d[i].longitude, "lat": d[i].latitude, "temperature": d[i].temperature, "colour": myColor});
    }
})

var temperature_f2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Fall2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.temperature); });
  var max = d3.max(d, function(a) { return + a.temperature; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        temperature_f2021.push({"long": d[i].longitude, "lat": d[i].latitude, "temperature": d[i].temperature, "colour": myColor});
    }
})

var chlorophyll_s2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Spring2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.chlorophyll_a_fluorescence); });
  var max = d3.max(d, function(a) { return + a.chlorophyll_a_fluorescence; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        chlorophyll_s2021.push({"long": d[i].longitude, "lat": d[i].latitude, "chlorophyll": d[i].chlorophyll_a_fluorescence, "colour": myColor});
    }
})

var chlorophyll_f2021 = [];
d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Insitu_WQ_Indicators_V2_2080/DeltaX_WQ_Indicators_Fall2021.csv", function(d) {
  function removeNaN(e,c){
    if(e>=0){return e}else{return c}
  }
  var min = d3.min(d, function(a) { return + removeNaN(a.chlorophyll_a_fluorescence); });
  var max = d3.max(d, function(a) { return + a.chlorophyll_a_fluorescence; });
  var myColor = d3.scaleLinear().domain([min,max]).range(["white", "red"])
  for (var i = 0; i < d.length; i++) {
        chlorophyll_f2021.push({"long": d[i].longitude, "lat": d[i].latitude, "chlorophyll": d[i].chlorophyll_a_fluorescence, "colour": myColor});
    }
})


var Airpressure = [
              {"long":-91.445,"lat":29.510, name:"Air pressure at Make Island in Atchafalaya River", "description": "In Fall 2021, the Solinst Levelogger Junior Edge Model 3001 and the Onset HOBO U20L instruments were used to measure air pressure." , id:"Atchafalaya_Airpressure", class:"measurements"},
              {"long":-90.823,"lat":29.172, name:"Air pressure at Terrebonne", "description": "In Fall 2021, the Solinst Levelogger Junior Edge Model 3001 was used to measure air pressure." , id:"Terrebonne_Airpressure", class:"measurements"}
              ];

var Alternanthera = [
            {"long":-91.27973,"lat":29.53945, name: "Occurance of alternanthera philoxeroides", "description": "In Fall 2015, vegetation was analysed. In this region, Alternanthera philoxeroides was found." , id:"Alternanthera", class:"measurements"},
              {"long":-91.27973,"lat":29.42521},
              {"long":-91.44506,"lat":29.42521},
              {"long":-91.44506,"lat":29.53945}];




// https://geojson-maps.ash.ms/
// need to upload it to github
// Load external data and boot
// https://d3-graph-gallery.com/graph/bubblemap_tooltip.html
d3.json("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/us-filtered.json", function(data){

  // "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson"

    // Filter data
    // data.features = data.features.filter( function(d){return d.properties.adm0_a3=="USA"} )

    // Draw the map
    svg.append("g")
        .selectAll("path")
        .data(data.features)
        .enter()
        .append("path")
          .attr("fill", "#b8b8b8")
          .attr("d", d3.geoPath()
              .projection(projection)
          )
        .style("stroke", "black")
        .style("opacity", .3)

    // create a tooltip
    var Tooltip = d3.select("#my_dataviz")
      .append("div")
      .attr("id", "plot")
      .attr("class", "tooltip")
      .style("opacity", 1)
      .style("border", "solid")
      .style("border-width", "2px")
      .style("border-radius", "5px")
      .style("padding", "5px")
      .html("Select a box")


    var mouseover_Airpressure = function(d) {

      boxes = document.getElementsByClassName(d.class)
      for(var i=0, len=boxes.length; i<len; i++)
      {
          boxes[i].style.stroke = "#173b6c";
      }

      box = document.getElementById(d.id)
      box.style.stroke = "#149ddd"
      
      Tooltip
        .html(d.name + "<br>" + d.description + "<br> <div id='plot'></div>")
        .style("left", (d3.mouse(this)[0]+10) + "px")
        .style("top", (d3.mouse(this)[1]) + "px")
        .attr("stroke", "#119900")

      // set the dimensions and margins of the graph
      var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 300 - margin.left - margin.right,
          height = 200 - margin.top - margin.bottom;

      // append the svg object to the body of the page
      var svg_plot = d3.select("#plot")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");


      if (d.id == "Atchafalaya_Airpressure") {

        //Read the data
      d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Turbidity_Data_V3_2113/DeltaX_Fall2021_AirPressure_Atchafalaya_MikeIsland_MW_channel.csv", function(data) {

        // group the data: I want to draw one line per group
        var sumstat = d3.nest() // nest function allows to group the calculation per level of a factor
          .key(function(d) { return d.instrument;})
          .entries(data);

        // Add X axis --> it is a date format
        var x = d3.scaleTime()
          .domain([
            new Date(d3.min(data, function(d) { return + new Date(d.time).getTime(); })), 
            new Date(d3.max(data, function(d) { return + new Date(d.time).getTime(); }))])
          .range([ 0, width ]);
        var xAxis = d3.axisBottom(x)
          .tickFormat(d3.timeFormat("%m-%d"))
          .ticks(3);
        svg_plot.append("g")
          .attr("transform", "translate(0," + height + ")") // makes it go to the bottom
          .call(xAxis); // d3.axisBottom(x));

        // Add Y axis
        var y = d3.scaleLinear()
          .domain([
            d3.min(data, function(d) { return + d.measured_pressure; }), 
            d3.max(data, function(d) { return + d.measured_pressure; })])
          .range([ height, 0 ]);
        var yAxis = d3.axisLeft(y)
          .ticks(5);
        svg_plot.append("g")
          .call(yAxis);

        // color palette
        var res = sumstat.map(function(d){ return d.key }) // list of group names
        var color = d3.scaleOrdinal()
          .domain(res)
          .range(['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00','#ffff33','#a65628','#f781bf','#999999'])

        // Draw the line
        svg_plot.selectAll(".line")
            .data(sumstat)
            .enter()
            .append("path")
              .attr("fill", "none")
              .attr("stroke", function(d){ return color(d.key) })
              .attr("stroke-width", 1.5)
              .attr("d", function(d){
                return d3.line()
                  .x(function(d) { return x(+new Date(d.time).getTime()); })
                  .y(function(d) { return y(+d.measured_pressure); })
                  (d.values)
              })
        })

      } else if (d.id == "Terrebonne_Airpressure"){

        //Read the data
      d3.csv("https://raw.githubusercontent.com/Conex-Research/conex-research.github.io/main/data/DeltaX_Turbidity_Data_V3_2113/DeltaX_Fall2021_AirPressure_Terrebonne_421_pond.csv", function(data) {

        // group the data: I want to draw one line per group
        var sumstat = d3.nest() // nest function allows to group the calculation per level of a factor
          .key(function(d) { return d.instrument;})
          .entries(data);

        // Add X axis --> it is a date format
        var x = d3.scaleTime()
          .domain([
            new Date(d3.min(data, function(d) { return + new Date(d.time).getTime(); })), 
            new Date(d3.max(data, function(d) { return + new Date(d.time).getTime(); }))])
          .range([ 0, width ]);
        var xAxis = d3.axisBottom(x)
          .tickFormat(d3.timeFormat("%m-%d"))
          .ticks(3);
        svg_plot.append("g")
          .attr("transform", "translate(0," + height + ")") // makes it go to the bottom
          .call(xAxis); // d3.axisBottom(x));

        // Add Y axis
        var y = d3.scaleLinear()
          .domain([
            d3.min(data, function(d) { return + d.measured_pressure; }), 
            d3.max(data, function(d) { return + d.measured_pressure; })])
          .range([ height, 0 ]);
        var yAxis = d3.axisLeft(y)
          .ticks(5);
        svg_plot.append("g")
          .call(yAxis);

        // color palette
        var res = sumstat.map(function(d){ return d.key }) // list of group names
        var color = d3.scaleOrdinal()
          .domain(res)
          .range(['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00','#ffff33','#a65628','#f781bf','#999999'])

        // Draw the line
        svg_plot.selectAll(".line")
            .data(sumstat)
            .enter()
            .append("path")
              .attr("fill", "none")
              .attr("stroke", function(d){ return color(d.key) })
              .attr("stroke-width", 1.5)
              .attr("d", function(d){
                return d3.line()
                  .x(function(d) { return x(+new Date(d.time).getTime()); })
                  .y(function(d) { return y(+d.measured_pressure); })
                  (d.values)
              })
      })
    }



      }

      
    var mouseover_Alternanthera = function(d) {
      boxes = document.getElementsByClassName(d[0].class)
      for(var i=0, len=boxes.length; i<len; i++)
      {
          boxes[i].style.stroke = "#173b6c";
      }

      box = document.getElementById(d[0].id)
      box.style.stroke = "#149ddd"
      Tooltip
        .html(d[0].name + "<br>" + d[0].description + "<br> <div id='plot'></div>")
        .style("left", (d3.mouse(this)[0]+10) + "px")
        .style("top", (d3.mouse(this)[1]) + "px")
        .attr("stroke", "#119900")
    }

    svg
      .selectAll("Airpressure_polygons")
      .data(Airpressure)
      .enter()
      .append('rect')
        .attr('x', function(d){ return projection([d.long, d.lat])[0]-15 })
        .attr('y', function(d){ return projection([d.long, d.lat])[1]-15 })
        .attr('width', 15)
        .attr('height', 15)
      .attr("stroke-width",2)
      .style("fill", "#111111")
      .attr("stroke", "#173b6c")
      .attr("id", function(d){return d.id})
      .attr("class", function(d){return d.class})
      .attr("fill-opacity", .2)
      .on("mouseover", mouseover_Airpressure)

    svg
      .selectAll("Alternanthera_polygon")
      .data([Alternanthera])
      .enter()
      .append("polygon")
      .attr("points",function(d) { 
                return d.map(function(d) {
                  return [projection([d.long, d.lat])[0], projection([d.long, d.lat])[1]].join(",")
          }).join(" ");
      })
      .attr("stroke-width",2)
      .style("fill", "#111111")
      .attr("stroke", "#173b6c")
      .attr("id", function(d){return d[0].id})
      .attr("class", function(d){return d[0].class})
      .attr("fill-opacity", .2)
      .on("mouseover", mouseover_Alternanthera)

    svg
      .selectAll("city_circle")
      .data(cities)
      .enter()
      .append("circle")
        .attr("cx", function(d){ return projection([d.long, d.lat])[0] })
        .attr("cy", function(d){ return projection([d.long, d.lat])[1] })
        .attr("r", 5)
        .attr("class", "city")
        .style("fill", "#173b6c")

    svg
     .selectAll("city_text")
     .data(cities)
     .enter()
     .append("text")
     .attr("x", function(d){ return projection([d.long+0.07, d.lat-0.03])[0] })
     .attr("y", function(d){ return projection([d.long+0.07, d.lat-0.03])[1] })
     .attr("text-anchor", "start")
     .text(function(d){ return d.name })

    /*
     svg
      .selectAll("river_circle")
      .data(Bathy)
      .enter()
      .append("circle")
        .attr("cx", function(d){ return projection([d.long, d.lat])[0] })
        .attr("cy", function(d){ return projection([d.long, d.lat])[1] })
        .attr("r", 5)
        .attr("class", "river")
        .style("fill",  function(d){ return d.colour})
      */ 
      
    ;
})


var visualise = function (d){

  var e = document.getElementById("spring_fall");
  var value = e.value;

  svg.selectAll(".river").remove();

    if (d == "turbidity"){
      if(value == "s2021"){
        turbidity = turbidity_s2021
      }else{
        turbidity = turbidity_f2021
      }
      svg
        .selectAll("turbidity_circle")
        .data(turbidity)
        .enter()
        .append("circle")
          .attr("cx", function(d){ return projection([d.long, d.lat])[0] })
          .attr("cy", function(d){ return projection([d.long, d.lat])[1] })
          .attr("r", 2)
          .attr("class", "river")
          .style("fill",  function(d){ return d.colour(d.turbidity)})

      }else if (d == "salinity"){
        if(value == "s2021"){
          salinity = salinity_s2021
        }else{
          salinity = salinity_f2021
        }
      svg
        .selectAll("salinity_circle")
        .data(salinity)
        .enter()
        .append("circle")
          .attr("cx", function(d){ return projection([d.long, d.lat])[0] })
          .attr("cy", function(d){ return projection([d.long, d.lat])[1] })
          .attr("r", 2)
          .attr("class", "river")
          .style("fill",  function(d){ return d.colour(d.salinity)})

      }else if (d == "temperature"){
        if(value == "s2021"){
          temperature = temperature_s2021
        }else{
          temperature = temperature_f2021
        }
      svg
        .selectAll("temperature_circle")
        .data(temperature)
        .enter()
        .append("circle")
          .attr("cx", function(d){ return projection([d.long, d.lat])[0] })
          .attr("cy", function(d){ return projection([d.long, d.lat])[1] })
          .attr("r", 2)
          .attr("class", "river")
          .style("fill",  function(d){ return d.colour(d.temperature)})
      }else if (d == "chlorophyll"){
        if(value == "s2021"){
          chlorophyll = chlorophyll_s2021
        }else{
          chlorophyll = chlorophyll_f2021
        }
      svg
        .selectAll("chlorophyll_circle")
        .data(chlorophyll)
        .enter()
        .append("circle")
          .attr("cx", function(d){ return projection([d.long, d.lat])[0] })
          .attr("cy", function(d){ return projection([d.long, d.lat])[1] })
          .attr("r", 2)
          .attr("class", "river")
          .style("fill",  function(d){ return d.colour(d.chlorophyll)})
      }

}





</script>


  <!-- END -->

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/typed.js/typed.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>